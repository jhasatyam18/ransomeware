module.exports = app => {
  // mock-data
  let data = [{"id":1,"name":"VMware","siteType":"Protection","description":"VMware Site","platformDetails":{"id":1,"platformType":"VMware","hostname":"54.38.208.207","port":443,"username":"administrator@vsphere.local","password":"*****","region":"","availZone":"","secretKey":"","accessKey":"","projectId":""},"node":{"id":1,"name":"Local Node","hostname":"54.38.208.206","username":"admin","password":"*****","nodeType":"Management","platformType":"VMware","managementPort":5000,"replicationPort":5001,"isLocalNode":true,"status":"online","encryptionKey":""},"isUpdated":false},{"id":4,"name":"AWS","siteType":"Recovery","description":"AWS Site","platformDetails":{"id":4,"platformType":"AWS","hostname":"","port":443,"username":"","password":"","region":"us-east-1","availZone":"us-east-1c","secretKey":"*****","accessKey":"AKIARWF3J3WPDUSOS6PJ","projectId":""},"node":{"id":3,"name":"AWS-repl-node-v2","hostname":"3.236.198.205","username":"admin","password":"*****","nodeType":"Management","platformType":"AWS","managementPort":5000,"replicationPort":5001,"isLocalNode":false,"status":"online","encryptionKey":""},"isUpdated":false},{"id":6,"name":"AWS site 2","siteType":"Recovery","description":"AWS new site","platformDetails":{"id":6,"platformType":"AWS","hostname":"","port":443,"username":"","password":"","region":"us-east-1","availZone":"us-east-1c","secretKey":"*****","accessKey":"AKIARWF3J3WPDUSOS6PJ","projectId":""},"node":{"id":4,"name":"AWS-repl-node","hostname":"100.27.6.177","username":"admin","password":"*****","nodeType":"Management","platformType":"AWS","managementPort":5000,"replicationPort":5001,"isLocalNode":false,"status":"online","encryptionKey":""},"isUpdated":false}];
  let vms = [{"id":0,"name":"dm-repl-VMware-01-dev-testing-061221","moref":"vm-235","virtualDisks":[{"id":0,"devicekey":"2000","size":300,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network 3","networkKey":4000}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":4,"memoryMB":8192,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"dm-repl-VMware-0.0-1-dev-testing-061221","moref":"vm-231","virtualDisks":[{"id":0,"devicekey":"2000","size":300,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network 3","networkKey":4000}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":4,"memoryMB":8192,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"prod-ubuntu-16-04","moref":"vm-159","virtualDisks":[{"id":0,"devicekey":"2000","size":180,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"Ubuntu Linux (64-bit)","hostMoref":"host-10","numCPU":2,"memoryMB":3072,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"prod-windows-server-2016","moref":"vm-154","virtualDisks":[{"id":0,"devicekey":"2000","size":500,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"Microsoft Windows Server 2016 or later (64-bit)","hostMoref":"host-10","numCPU":12,"memoryMB":4096,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"scale-test-debian-gcp","moref":"vm-145","virtualDisks":[{"id":0,"devicekey":"2000","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"Debian GNU/Linux 9 (64-bit)","hostMoref":"host-10","numCPU":1,"memoryMB":4096,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"sanity-centos-multi-disk-aws","moref":"vm-142","virtualDisks":[{"id":0,"devicekey":"2000","size":190,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2002","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2003","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":2,"memoryMB":2048,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"scale-test-clone-win-2k16-orig","moref":"vm-140","virtualDisks":[{"id":0,"devicekey":"2000","size":500,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":500,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"Microsoft Windows Server 2016 or later (64-bit)","hostMoref":"host-10","numCPU":3,"memoryMB":4096,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"sanity-centos-multi-disk-aws-orig","moref":"vm-138","virtualDisks":[{"id":0,"devicekey":"2000","size":100,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":150,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2002","size":150,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":2,"memoryMB":2048,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"sanity-centos-7-multi-disk","moref":"vm-136","virtualDisks":[{"id":0,"devicekey":"2000","size":200,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":100,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2002","size":100,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":2,"memoryMB":2048,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"scale-test-centos-scsi-disk-3-new","moref":"vm-134","virtualDisks":[{"id":0,"devicekey":"2000","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2002","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"CentOS 6 (64-bit)","hostMoref":"host-10","numCPU":1,"memoryMB":4096,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"vt-ubuntu-18-02","moref":"vm-149","virtualDisks":[{"id":0,"devicekey":"2000","size":100,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000}],"summary":"","guestOS":"Ubuntu Linux (64-bit)","hostMoref":"host-10","numCPU":2,"memoryMB":3072,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0},{"id":0,"name":"scale-test-centos7.9-mix-multidisk-4","moref":"vm-105","virtualDisks":[{"id":0,"devicekey":"2002","size":550,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2003","size":300,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2000","size":250,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false},{"id":0,"devicekey":"2001","size":300,"snapshotId":"","datastoreMoref":"datastore-11","volumeNotInSync":"","isDeleted":false}],"virtualNics":[{"id":0,"name":"Network adapter 1","networkName":"VM Network","networkKey":4000},{"id":0,"name":"Network adapter 2","networkName":"VM Network","networkKey":4001}],"summary":"","guestOS":"CentOS 7 (64-bit)","hostMoref":"host-10","numCPU":1,"memoryMB":4096,"snapshotInfo":"","lastRunTime":0,"recoveryStatus":"","isProtected":false,"isDeleted":false,"isNotInSync":false,"sourceNodeID":0,"targetNodeID":0}];
  let networks = { "subnets": [{ "id": "default", "name": "10.128.0.0/20" }], "securityGroups": [{ "id": "http-server", "name": "" }, { "id": "https-server", "name": "" }] };
  app.get("/api/v1/sites", (req, res) => {
    res.send(data);
  });

  app.get("/api/v1/sites/:id/vms", (req, res) => {
    res.send(vms);
  });

  app.post("/api/v1/sites", (req, res) => {
    const newID = data.length * 5 + 1;
    const obj = req.body;
    obj.id = newID;
    data.push(obj);
    res.send(obj);
  });

  app.delete("/api/v1/sites/:id", (req, res) => {
    const id = req.params.id
    let response = [];
    data.forEach(site => {
      if (site.id != id) {
        response.push(site);
      }
    });
    data = response;
    res.send({});
  });

  app.get("/api/v1/sites/:id/networks", (req, res) => {
    res.send(networks);
  });

  app.put("/api/v1/sites/:id", (req, res) => {
    const ID = req.body.id;
    data.forEach(site => {
      if (site.id != ID) {
        site = res.body;
      }
    });
    res.send(req.body);
  });
};
